---
output: github_document
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  message = FALSE, 
  warning = FALSE,
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# obus

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://lifecycle.r-lib.org/articles/stages.html#experimental)
[![CRAN status](https://www.r-pkg.org/badges/version/imbus)](https://CRAN.R-project.org/package=imbus)
<!-- badges: end -->

{obus} is a temporary experimental package used to explore various DATRAS data connections and wrapper functions to make life a little easier for everyday user. Some of this may be taken up in a more offical package.

## Installation

You can install the development version of {obus} from [GitHub](https://github.com/einarhjorleifsson/obus) with:

``` r
remotes::install_github("einarhjorleifsson/obus")
```

Because in some explorations {obus} has wrapper functions over {icesDatras}-functions and because some modification has been done to the latter (issues pending) for now you need to install it via:

``` r
remotes::install_github("einarhjorleifsson/icesDatras")
```

There are two ways to connect to the DATRAS data, either by importing the whole datasets into R or by making a in-process DuckDB connection.

```{r}
library(tidyverse)
library(obus)
library(icesDatras)
```

## Importing

The fastest way to import a the DATRAS tables into R is:

```{r}
system.time({
  hh <- dr_get("HH", from = "parquet")
  hl <- dr_get("HL", from = "parquet")
  ca <- dr_get("CA", from = "parquet")
})
hl |> glimpse()
```

## Connecting

You can generate a connection to the main DATRAS tables by:

```{r}
hh <- dr_con("HH")
hl <- dr_con("HL")
ca <- dr_con("CA")
```

## A little peek

```{r}
#| warning: false
#| message: false
hh
hl
ca
```
