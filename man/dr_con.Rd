% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/dr_con.R
\name{dr_con}
\alias{dr_con}
\title{Establish a DuckDB Connection to DATRAS Datasets}
\usage{
dr_con(
  type = NULL,
  trim = TRUE,
  url = "https://heima.hafro.is/~einarhj/datras_latin",
  quiet = TRUE
)
}
\arguments{
\item{type}{A character string specifying the dataset type. Possible values:
\itemize{
\item \code{"HH"}: Haul-level data.
\item \code{"HL"}: Catch-at-length data (filterable via the \code{trim} option).
\item \code{"CA"}: Catch-at-age data (filterable via the \code{trim} option).
\item \code{"species"}: Species dataset derived from ICES SpecWoRMS.
}}

\item{trim}{Logical. For \code{"HL"} or \code{"CA"}, if \code{TRUE} (default), non-essential fields are excluded. Ignored for other datasets.}

\item{url}{URL to the Parquet file directory, defaulting to \code{"https://heima.hafro.is/~einarhj/datras_latin"}.}

\item{quiet}{Logical. If \code{TRUE} (default), suppresses connection warnings and messages.}
}
\value{
A DuckDB dataset object, representing the selected DATRAS dataset type.
}
\description{
This function creates a DuckDB connection to a specified DATRAS dataset type,
facilitating access to trawl survey data stored in Parquet format. The
dataset type determines which data is loaded from the remote source.
}
\section{Dataset Types}{

This function operates on the following dataset types:
\itemize{
\item \strong{"HH" (Haul-Level Data)}: Contains information related to individual haul events.
\item \strong{"HL" (Catch-at-Length Data)}: Records catches categorized by length class.
\item \strong{"CA" (Catch-at-Age Data)}: Includes age-based biological data (e.g., liver weight, length).
\item \strong{"species" (Species List)}: Derived from the ICES vocabulary 'SpecWoRMS' and includes species names and related metadata.
}
}

\section{Dataset Paths}{

The dataset is accessed via HTTP/HTTPS paths at a user-defined or default URL
location. The file names are inferred from the provided \code{type} parameter
(e.g., a Parquet file named \code{"HH.parquet"} for \code{"HH"} type data).
}

\section{Unique Identifier (.id)}{

For dataset types \code{"HH"}, \code{"HL"}, and \code{"CA"}, a unique identifier column (\code{.id})
is generated to represent combinations of haul-related fields (e.g., Survey,
Year, Country, Station Name).
}

\examples{
\dontrun{
  # Establish connections
  dr_con("HH")                   # Connect to haul-level data.
  dr_con("HL", trim = FALSE)     # Include all fields for catch-at-length data.
  species_data <- dr_con("species")

  # Inspect species data
  dplyr::glimpse(species_data)
}
}
